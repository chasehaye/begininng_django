{% extends 'base.html' %}
{% block content %}
<h1>Finch Details</h1>
<div class='card'>
        <div class='card-content'>
            <span class='card-title'>{{finch.name}}</span>
            <p>Breed: {{finch.breed}}</p>
            <p>Age: {{finch.age}}</p>
            <p>Length: {{finch.length}}</p>
        </div>
        <div class="card-action">
            <a href="{% url 'finchs_update' finch.id %}">Edit</a>
            <a href="{% url 'finchs_delete' finch.id %}">Delete</a> 
        </div>
</div>

<div class="col s6">

    <form action="{% url 'add_location' finch.id %}" method="POST">
        {% csrf_token %}
        {{location_form.as_p}}
        <input type="submit" class="btn" value="Add a Location">
    </form>


    <table class="striped">
      <thead>
        <tr><th>Climate</th><th>Country</th></tr>
      </thead>
      <tbody>
        {% for location in finch.location_set.all %}
          <tr>
            <td>{{location.climate}}</td>
            <td>{{location.country}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>



  <div class="row">
    <div class="col s6">
      <h3>{{ finch.name }}'s Feeds</h3>
      {% if finch.feeds.count %}
        {% for feed in finch.feeds.all %}
          <div class="card">
            <div class="card-content">
              <span class="card-title">
              <h3>{{ feed.name }}: </h3> <p>{{ feed.type }}</p>
              </span>
            </div>
            <div class="card-action">
              <form action="{% url 'unassoc_feed' finch.id feed.id %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn">Remove</button>
              </form>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <h5>No Feed Yet!</h5>
      {% endif %}
    </div>
  </div>

  <div class="col s6">
    <h3>Available Feeds</h3>
    {% if feeds_finch_doesnt_have.count %}
      {% for feed in feeds_finch_doesnt_have.all %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">
              <h3>{{ feed.name }}: </h3> <p>{{ feed.type }}</p>
            </span>
          </div>
          <div class="card-action">
            <form action="{% url 'assoc_feed' finch.id feed.id %}" method="POST">
              {% csrf_token %}
              <button type="submit" class="btn">Add</button>
            </form>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <h5>{{finch.name}} Has it All!</h5>
    {% endif %}
  </div>
</div>
{% endblock %}